
<%= link_to "←", root_path, class: "btn-light" %>
<div class="container-progress-bar">
  <div class="progress">
    <div class="step">
      <p class="step-text">Search</p>
      <div class="bullet completed completed-line"></div>
    </div>
    <div class="step">
      <p class="step-text">Space</p>
      <div class="bullet bullet-on"></div>
    </div>
    <div class="step">
      <p class="step-text">Restaurant</p>
      <div class="bullet"></div>
    </div>
    <div class="step">
      <p class="step-text">Summary</p>
      <div class="bullet"></div>
    </div>
  </div>
</div>


<div class="show-container">
  <h1><%= @space.name %></h1>
  <div class="img-wrapper">
     <%= cl_image_tag @space.photo.key, height: 300, crop: :fill %>
     <%= link_to toggle_favorite_space_path(@space, show: true, search: {area: params.dig(:search, :area), space: params.dig(:search, :space)}), method: :post do %>
       <% if @space.favorited_by?(current_user) %>
         <i class="fas fa-heart"></i>
       <% else %>
         <i class="far fa-heart"></i>
       <% end %>
     <% end %>
   </div>
   <div class="show-container-infos">
     <p><%= @space.description %></p>
     <p><%= @space.location %></p>
     <%= link_to "Add to plan", space_space_plans_path(@space), method: :post, class:"btn-dark" %>
    <br>
  </div>
</div>


<div class="review-card-container">
  <% @space.space_reviews.each do |review| %>
    <div class="review-card">
      "<%= review.content%>"
      <% review.rating.times do %>
        <i class="fas fa-star"></i>
      <% end %>
      <% (5 - review.rating).times do %>
        <i class="far fa-star"></i>
      <% end %>
      <br>
      - <%= review.user.email %>
    </div>
  <% end %>
</div>

<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">
  Add review
</button>

<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Add a review</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
         <%= simple_form_for [@space, @space_review] do |f| %>
          <%= f.input :content %>
          <%= f.input :rating, collection: (1..5).to_a, label: "Rate your experience" %>
          <%= f.submit, class: 'btn-primary' %>
        <% end %>
      </div>
    </div>
  </div>
</div>

<div class="container">
  <div id="map" style="width: 100%; height: 300px;" data-markers="<%= @markers.to_json %>"
    data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>"></div>
  <br>

  <br>
</div>
</div>
